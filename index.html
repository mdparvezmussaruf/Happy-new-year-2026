<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b1026">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;
  height:100%;
  overflow:hidden;
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
  background:radial-gradient(circle at top,#1c2a4a,#0b1026);
  color:#fff;
}

/* CANVAS MUST NOT BLOCK INPUT */
canvas{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:0;
}

.screen{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2;
  transition:opacity 1s ease;
}

.hidden{
  opacity:0;
  pointer-events:none;
}

.card{
  width:min(90vw,420px);
  padding:32px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
  border-radius:18px;
  text-align:center;
  z-index:3;
}

.input-wrap{
  position:relative;
  margin-top:20px;
}

input{
  width:100%;
  padding:14px 46px 14px 14px;
  border-radius:12px;
  border:none;
  background:rgba(255,255,255,.15);
  color:#fff;
  font-size:1rem;
  outline:none;
}

.input-wrap button{
  position:absolute;
  right:6px;
  top:6px;
  width:34px;
  height:34px;
  border-radius:50%;
  border:1px solid #f5d37b;
  background:transparent;
  color:#f5d37b;
  cursor:pointer;
}

h1{
  font-size:clamp(2rem,5vw,3rem);
  color:#f5d37b;
}

.subtitle{
  margin-top:8px;
  font-size:1.3rem;
  opacity:.9;
}

#cta{
  margin-top:36px;
  padding:14px 28px;
  border-radius:40px;
  border:1px solid #f5d37b;
  background:transparent;
  color:#f5d37b;
  display:none;
  cursor:pointer;
}

.slide{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:30px;
  opacity:0;
  transition:opacity 1s ease;
}

.slide.active{
  opacity:1;
}

.quote{
  max-width:820px;
  padding:40px;
  background:rgba(255,255,255,.08);
  border-radius:20px;
  font-size:clamp(1.2rem,3.6vw,2rem);
  line-height:1.6;
  text-align:center;
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<audio id="bgm" src="soft_love_piano.wav" loop></audio>

<!-- PASSWORD SCREEN -->
<div id="lock" class="screen">
  <div class="card">
    <h2>Enter the name written in my heart</h2>
    <div class="input-wrap">
      <input id="pass" type="text" autocomplete="off" placeholder="Type here…" />
      <button id="enterBtn">⏎</button>
    </div>
  </div>
</div>

<!-- CELEBRATION SCREEN -->
<div id="celebrate" class="screen hidden">
  <div style="text-align:center">
    <h1>Happy New Year</h1>
    <div class="subtitle">My Beloved Wife</div>
    <div class="subtitle">2026</div>
    <button id="cta">New Year Wishes</button>
  </div>
</div>

<!-- SLIDES -->
<div id="slides" class="screen hidden"></div>

<script>
/* ===== MIXED LOVE SNOW CANVAS ===== */
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");
let W, H;

function resize(){
  W = canvas.width = innerWidth;
  H = canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* Snow types */
const SNOW_COUNT = 70; // safe for low-end devices
const snow = [];

function randomSnow(){
  const type = Math.random();
  return {
    x: Math.random() * W,
    y: Math.random() * H,
    r: 2 + Math.random() * 3,
    speed: 0.3 + Math.random() * 0.7,
    drift: (Math.random() - 0.5) * 0.3,
    rot: Math.random() * Math.PI,
    rotSpeed: (Math.random() - 0.5) * 0.01,
    type:
      type < 0.33 ? "heart" :
      type < 0.66 ? "flake" :
      "dot"
  };
}

for(let i=0;i<SNOW_COUNT;i++) snow.push(randomSnow());

function drawHeart(x,y,size){
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.bezierCurveTo(x - size, y - size, x - size*1.4, y + size/3, x, y + size);
  ctx.bezierCurveTo(x + size*1.4, y + size/3, x + size, y - size, x, y);
  ctx.fill();
}

function drawFlake(x,y,r,rot){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(rot);
  ctx.strokeStyle="rgba(255,255,255,0.7)";
  ctx.lineWidth=1;
  for(let i=0;i<6;i++){
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(0,r);
    ctx.stroke();
    ctx.rotate(Math.PI/3);
  }
  ctx.restore();
}

function animate(){
  ctx.clearRect(0,0,W,H);

  snow.forEach(s=>{
    ctx.save();
    ctx.translate(s.x,s.y);
    ctx.rotate(s.rot);

    if(s.type==="heart"){
      ctx.fillStyle="rgba(255,200,220,0.7)";
      drawHeart(0,0,s.r*1.2);
    }
    else if(s.type==="flake"){
      drawFlake(0,0,s.r*2,s.rot);
    }
    else{
      ctx.fillStyle="rgba(255,255,255,0.8)";
      ctx.beginPath();
      ctx.arc(0,0,s.r,0,Math.PI*2);
      ctx.fill();
    }

    ctx.restore();

    /* motion */
    s.y += s.speed;
    s.x += s.drift;
    s.rot += s.rotSpeed;

    if(s.y > H){
      Object.assign(s, randomSnow(), { y: -10 });
    }
  });

  requestAnimationFrame(animate);
}

animate();


/* ===== PASSWORD LOGIC ===== */
const pass = document.getElementById("pass");
const enterBtn = document.getElementById("enterBtn");
const lock = document.getElementById("lock");
const celebrate = document.getElementById("celebrate");
const cta = document.getElementById("cta");

function unlock(){
  if(pass.value.trim().toLowerCase() === "farhana akter rova"){
    lock.classList.add("hidden");
    celebrate.classList.remove("hidden");
    document.getElementById("bgm").volume = 0.22;
    document.getElementById("bgm").play().catch(()=>{});
    fireworkText("Farhana Akter Rova");
    setTimeout(()=>cta.style.display="inline-block",8000);
  }
}

enterBtn.onclick = unlock;
pass.addEventListener("keydown",e=>e.key==="Enter" && unlock());

/* ===== QUOTES ===== */
const quotes = [
  "Every bug you face means you are building something real.",
  "You shape minds and futures with quiet strength.",
  "You hold the world together in ways no one sees.",
  "Every delay is shaping a stronger dream.",
  "Learning is never wasted time.",
  "You are not behind. You are becoming.",
  "You are deeply loved and never alone."
];

cta.onclick = ()=>{
  celebrate.classList.add("hidden");
  slides.classList.remove("hidden");

  quotes.sort(()=>Math.random()-.5);
  quotes.forEach((q,i)=>{
    const d=document.createElement("div");
    d.className="slide"+(i===0?" active":"");
    d.innerHTML=`<div class="quote">${q}</div>`;
    slides.appendChild(d);
  });

  let i=0;
  setInterval(()=>{
    const s=document.querySelectorAll(".slide");
    s[i].classList.remove("active");
    i=(i+1)%s.length;
    s[i].classList.add("active");
  },5000);
};

/* ===== PWA ===== */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
